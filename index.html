<!DOCTYPE HTML>
<html>
<head>
    <title>Phone Guessr</title>
    <link rel="icon" type="image/x-icon" href="../assets/logos/logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        .center {
            text-align: center;
        }
        .spec {
            opacity: 0;
            transition: opacity 1s;
        }
        .fade-in {
            opacity: 1 !important;
        }
        #revealButton {
            background-color: #C9ECC6;
        }
    </style>
</head>
<body>
    <div class="center">
        <div id="phonespecs"></div>
        <input list="phones" id="guessInput" name="phoneGuess" placeholder="Guess the phone...">
        <datalist id="phones">
            <option value="Google Pixel Fold">
            <option value="Apple iPhone 16e">
            <option value="Samsung S25 Ultra">
            <option value="OnePlus 13">
        </datalist>
        <p id="phonename" style="display:none;">Phone Name</p>
        <p id="feedback" style="display:none;"></p>
        <button id="revealButton" onclick="revealphone()">Reveal Phone</button>
        <button id="guessAgainButton" onclick="resetGame()" style="display:none;">Guess Again</button>
    </div>
    <script>
        function initializeGame() {
            const phones = ["Google Pixel Fold", "Apple iPhone 16e", "Samsung S25 Ultra", "OnePlus 13"];
            const phonespecs = [
                ["48MP camera", "12GB RAM", "4821 mAh", "Tensor G2", "7.6 inch screen"],
                ["48MP camera", "8GB RAM", "unknown", "A18 Bionic Chip", "6.1 inch screen"],
                ["200MP camera", "12/16GB RAM", "5000mAh", "Snapdragon 8 Elite", "6.9 inch screen"],
                ["50MP camera", "12/24GB RAM", "6000mAh", "Snapdragon 8 Elite", "6.82 inch screen"]
            ];

            const randomphone = Math.floor(Math.random() * phones.length);
            const phoneselection = phones[randomphone];
            const specselection = phonespecs[randomphone];

            const specContainer = document.getElementById("phonespecs");
            specContainer.innerHTML = "";
            specselection.forEach((spec, index) => {
                const specElement = document.createElement("p");
                specElement.textContent = spec;
                specElement.className = "spec";
                specElement.style.transitionDelay = `${index * 0.5}s`;
                specContainer.appendChild(specElement);
            });

            setTimeout(() => {
                const specElements = document.querySelectorAll(".spec");
                specElements.forEach(element => element.classList.add("fade-in"));
            }, 100);

            document.getElementById("phonename").innerHTML = phoneselection;
            document.getElementById("phonename").style.display = "none";
            document.getElementById("feedback").style.display = "none";
            document.getElementById("revealButton").style.display = "block";
            document.getElementById("guessAgainButton").style.display = "none";
        }

        function revealphone() {
            const guessInput = document.getElementById("guessInput").value;
            const phoneNameElement = document.getElementById("phonename");
            const feedbackElement = document.getElementById("feedback");
            const revealButtonElement = document.getElementById("revealButton");
            const guessAgainButtonElement = document.getElementById("guessAgainButton");

            if (!feedbackElement || !phoneNameElement || !revealButtonElement || !guessAgainButtonElement) {
                console.error("One or more necessary elements not found.");
                return;
            }

            if (guessInput === "") {
                feedbackElement.innerHTML = "Input cannot be empty.";
                feedbackElement.style.display = "block";
                playSound('../assets/sounds/invalid.wav');
                return;
            }

            const validChoices = ["Google Pixel Fold", "Apple iPhone 16e", "Samsung S25 Ultra", "OnePlus 13"];
            if (!validChoices.includes(guessInput)) {
                feedbackElement.innerHTML = "Please enter a valid choice.";
                feedbackElement.style.display = "block";
                playSound('../assets/sounds/invalid.wav');
                return;
            }

            const phoneselection = phoneNameElement.innerHTML;
            if (guessInput === phoneselection) {
                feedbackElement.innerHTML = "You got it right!";
                feedbackElement.style.color = "green";
                feedbackElement.classList.add("animate__animated", "animate__tada");
                playSound('../assets/sounds/correct.wav');
            } else {
                feedbackElement.innerHTML = `You got it wrong! The correct phone is ${phoneselection}.`;
                feedbackElement.style.color = "red";
                feedbackElement.classList.add("animate__animated", "animate__headshake");
                playSound('../assets/sounds/incorrect.wav');
            }

            phoneNameElement.style.display = "block";
            phoneNameElement.classList.add("animate__animated", "animate__zoomIn");
            feedbackElement.style.display = "block";
            revealButtonElement.style.display = "none";
            guessAgainButtonElement.style.display = "block";
        }

        function playSound(filePath) {
            const audio = new Audio(filePath);
            audio.play().catch(err => {
                console.error("Error playing sound: ", err);
            });
        }

        function resetGame() {
            initializeGame();
        }

        document.addEventListener("DOMContentLoaded", initializeGame);

        document.addEventListener("keydown", function(event) {
            if (event.key === "1") {
                playSound('../assets/sounds/tip1.wav');
            } else if (event.key === "2") {
                playSound('../assets/sounds/tip2.wav');
            } else if (event.key === "3") {
                playSound('../assets/sounds/tip3.wav');
            }
        });
    </script>
</body>
</html>
